// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Company {
  id                   String     @id @default(auto()) @map("_id") @db.ObjectId
  name                 String
  description          String
  phoneNumber          String?
  location             Location?
  availabilityDistance Float?
  mainImage            String
  otherImages          String[]
  workHours            WorkHours?
  days                 Day[]
  type                 String     @default("Restaurant")
  specialty            String?
  menu                 Menu[]
  keywords             String[]
}

type Location {
  longitude Float
  latitude  Float
}

type WorkHours {
  start DateTime
  end   DateTime
}

enum Day {
  lundi
  mardi
  mercredi
  jeudi
  vendredi
  samedi
  dimanche
}

model Menu {
  id        String    @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  products  Product[]
  company   Company   @relation(fields: [companyId], references: [id])
  companyId String    @db.ObjectId
}

model Product {
  id             String       @id @default(auto()) @map("_id") @db.ObjectId
  name           String
  price          Float
  description    String
  mainImageUrl   String
  otherImagesUrl String[]
  supplements    Supplement[]
  menuId         String       @db.ObjectId
  Menu           Menu         @relation(fields: [menuId], references: [id])
}

model Supplement {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  price     Float
  productId String @db.ObjectId

  Product Product @relation(fields: [productId], references: [id])
}

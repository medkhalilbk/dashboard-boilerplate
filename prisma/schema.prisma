// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model companies {
  id                   String     @id @default(auto()) @map("_id") @db.ObjectId
  name                 String
  description          String
  phoneNumber          String?
  location             Location?
  availabilityDistance Float?
  mainImage            String
  otherImages          String[]
  workHours            WorkHours?
  days                 Day[]
  type                 String     @default("Restaurant")
  specialty            String?
  Menu                 String[]   @db.ObjectId
  keywords             String[]
}

type Location {
  longitude Float
  latitude  Float
}

type WorkHours {
  start DateTime
  end   DateTime
}

enum Day {
  lundi
  mardi
  mercredi
  jeudi
  vendredi
  samedi
  dimanche
}

model menus {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  products  String[] @db.ObjectId
  companyId String   @db.ObjectId
  status    String
}

model products {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  name           String
  price          Float
  description    String
  mainImageUrl   String
  otherImagesUrl String[]
  supplements    String[] @db.ObjectId
}

model supplements {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  price     Float
  productId String @db.ObjectId
}

model User {
  id              String @id @default(auto()) @map("_id") @db.ObjectId
  name             String
  email            String   @unique
  password         String
  role             String
  isEmailVerified  Boolean  @default(false)
  imgUrl           String?
  updatedAt        DateTime @default(now())
  date             DateTime @map("date")

  @@map("users")
}
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Companies{
  id                   String     @id @default(auto()) @map("_id") @db.ObjectId
  name                 String
  description          String
  phoneNumber          String?
  location             Location?
  availabilityDistance Float?
  mainImage            String
  otherImages          String[]
  workHours            WorkHours?
  days                 Day[]
  type                 String     @default("Restaurant")
  specialty            String?
  Menu                 String[]   @db.ObjectId
  keywords             String[]
}

type Location {
  longitude Float
  latitude  Float
}

type WorkHours {
  start DateTime
  end   DateTime
}

enum Day {
  lundi
  mardi
  mercredi
  jeudi
  vendredi
  samedi
  dimanche
}

model Menus {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  products  String[] @db.ObjectId
  companyId String   @db.ObjectId
  status    String
}

model Products {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  name           String
  price          Float
  description    String
  mainImageUrl   String
  otherImagesUrl String[]
  supplements    String[] @db.ObjectId
}

model Supplements {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  price     Float
  productId String @db.ObjectId
}

model Users {
  id              String    @id @default(auto()) @map("_id") @db.ObjectId
  name            String
  email           String
  password        String
  role            String
  isEmailVerfied  Boolean
  createdAt       DateTime?
  updatedAt       DateTime?
  companyId       String?   @db.ObjectId
  deliveryManId   String?   @db.ObjectId
  deliveryAddress Location?
  imgUrl          String?
}

model DeliveryMans {
  id                   String  @id @default(auto()) @map("_id") @db.ObjectId
  fullName             String
  phoneNumber          String
  socialStatus         String?
  ordersCompleted      Int
  vehiculeSerialNumber String
  cin                  String
  isActive             Boolean
  contractFile         String?
}


model Orders{
  id  String  @id @default(auto()) @map("_id") @db.ObjectId
  productId String   @db.ObjectId
  quantity Int
  Restaurant String @db.ObjectId
  price Int
  createdAt DateTime
}

model Cart{
  id String  @id @default(auto()) @map("_id") @db.ObjectId
  orders String[] @db.ObjectId
  location Location
  deliveryMan String @db.ObjectId //this should be the user id not deliveryManId
  status String
  createdAt DateTime
}